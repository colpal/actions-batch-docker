!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=9)}([function(t,e){t.exports=require("path")},function(t,e){t.exports=require("os")},function(t,e){t.exports=require("assert")},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const o=r(11),s=i(r(1)),a=i(r(0));var c;function u(t){o.issue("error",t instanceof Error?t.toString():t)}function l(t){o.issue("group",t)}function h(){o.issue("endgroup")}!function(t){t[t.Success=0]="Success",t[t.Failure=1]="Failure"}(c=e.ExitCode||(e.ExitCode={})),e.exportVariable=function(t,e){const r=o.toCommandValue(e);process.env[t]=r,o.issueCommand("set-env",{name:t},r)},e.setSecret=function(t){o.issueCommand("add-mask",{},t)},e.addPath=function(t){o.issueCommand("add-path",{},t),process.env.PATH=`${t}${a.delimiter}${process.env.PATH}`},e.getInput=function(t,e){const r=process.env["INPUT_"+t.replace(/ /g,"_").toUpperCase()]||"";if(e&&e.required&&!r)throw new Error("Input required and not supplied: "+t);return r.trim()},e.setOutput=function(t,e){o.issueCommand("set-output",{name:t},e)},e.setCommandEcho=function(t){o.issue("echo",t?"on":"off")},e.setFailed=function(t){process.exitCode=c.Failure,u(t)},e.isDebug=function(){return"1"===process.env.RUNNER_DEBUG},e.debug=function(t){o.issueCommand("debug",{},t)},e.error=u,e.warning=function(t){o.issue("warning",t instanceof Error?t.toString():t)},e.info=function(t){process.stdout.write(t+s.EOL)},e.startGroup=l,e.endGroup=h,e.group=function(t,e){return n(this,void 0,void 0,(function*(){let r;l(t);try{r=yield e()}finally{h()}return r}))},e.saveState=function(t,e){o.issueCommand("save-state",{name:t},e)},e.getState=function(t){return process.env["STATE_"+t]||""}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(2),i=r(0),o="win32"===process.platform;function s(t){return n(t,"hasAbsoluteRoot parameter 'itemPath' must not be empty"),t=a(t),o?t.startsWith("\\\\")||/^[A-Z]:\\/i.test(t):t.startsWith("/")}function a(t){if(t=t||"",o){t=t.replace(/\//g,"\\");return(/^\\\\+[^\\]/.test(t)?"\\":"")+t.replace(/\\\\+/g,"\\")}return t.replace(/\/\/+/g,"/")}function c(t){return t?(t=a(t)).endsWith(i.sep)?t===i.sep||o&&/^[A-Z]:\\$/i.test(t)?t:t.substr(0,t.length-1):t:""}e.dirname=function(t){if(t=c(t),o&&/^\\\\[^\\]+(\\[^\\]+)?$/.test(t))return t;let e=i.dirname(t);return o&&/^\\\\[^\\]+\\[^\\]+\\$/.test(e)&&(e=c(e)),e},e.ensureAbsoluteRoot=function(t,e){if(n(t,"ensureAbsoluteRoot parameter 'root' must not be empty"),n(e,"ensureAbsoluteRoot parameter 'itemPath' must not be empty"),s(e))return e;if(o){if(e.match(/^[A-Z]:[^\\/]|^[A-Z]:$/i)){let t=process.cwd();return n(t.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${t}'`),e[0].toUpperCase()===t[0].toUpperCase()?2===e.length?`${e[0]}:\\${t.substr(3)}`:(t.endsWith("\\")||(t+="\\"),`${e[0]}:\\${t.substr(3)}${e.substr(2)}`):`${e[0]}:\\${e.substr(2)}`}if(a(e).match(/^\\$|^\\[^\\]/)){const t=process.cwd();return n(t.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${t}'`),`${t[0]}:\\${e.substr(1)}`}}return n(s(t),"ensureAbsoluteRoot parameter 'root' must have an absolute root"),t.endsWith("/")||o&&t.endsWith("\\")||(t+=i.sep),t+e},e.hasAbsoluteRoot=s,e.hasRoot=function(t){return n(t,"isRooted parameter 'itemPath' must not be empty"),t=a(t),o?t.startsWith("\\")||/^[A-Z]:/i.test(t):t.startsWith("/")},e.normalizeSeparators=a,e.safeTrimTrailingSeparator=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.None=0]="None",t[t.Directory=1]="Directory",t[t.File=2]="File",t[t.All=3]="All"}(e.MatchKind||(e.MatchKind={}))},function(t,e){t.exports=require("fs")},function(t,e){t.exports=require("child_process")},function(t,e,r){"use strict";var n,i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=r(2),s=r(6),a=r(0);function c(t){return(1&t.mode)>0||(8&t.mode)>0&&t.gid===process.getgid()||(64&t.mode)>0&&t.uid===process.getuid()}n=s.promises,e.chmod=n.chmod,e.copyFile=n.copyFile,e.lstat=n.lstat,e.mkdir=n.mkdir,e.readdir=n.readdir,e.readlink=n.readlink,e.rename=n.rename,e.rmdir=n.rmdir,e.stat=n.stat,e.symlink=n.symlink,e.unlink=n.unlink,e.IS_WINDOWS="win32"===process.platform,e.exists=function(t){return i(this,void 0,void 0,(function*(){try{yield e.stat(t)}catch(t){if("ENOENT"===t.code)return!1;throw t}return!0}))},e.isDirectory=function(t,r=!1){return i(this,void 0,void 0,(function*(){return(r?yield e.stat(t):yield e.lstat(t)).isDirectory()}))},e.isRooted=function(t){if(!(t=function(t){if(t=t||"",e.IS_WINDOWS)return(t=t.replace(/\//g,"\\")).replace(/\\\\+/g,"\\");return t.replace(/\/\/+/g,"/")}(t)))throw new Error('isRooted() parameter "p" cannot be empty');return e.IS_WINDOWS?t.startsWith("\\")||/^[A-Z]:/i.test(t):t.startsWith("/")},e.mkdirP=function t(r,n=1e3,s=1){return i(this,void 0,void 0,(function*(){if(o.ok(r,"a path argument must be provided"),r=a.resolve(r),s>=n)return e.mkdir(r);try{return void(yield e.mkdir(r))}catch(i){switch(i.code){case"ENOENT":return yield t(a.dirname(r),n,s+1),void(yield e.mkdir(r));default:{let t;try{t=yield e.stat(r)}catch(t){throw i}if(!t.isDirectory())throw i}}}}))},e.tryGetExecutablePath=function(t,r){return i(this,void 0,void 0,(function*(){let n=void 0;try{n=yield e.stat(t)}catch(e){"ENOENT"!==e.code&&console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${e}`)}if(n&&n.isFile())if(e.IS_WINDOWS){const e=a.extname(t).toUpperCase();if(r.some(t=>t.toUpperCase()===e))return t}else if(c(n))return t;const i=t;for(const o of r){t=i+o,n=void 0;try{n=yield e.stat(t)}catch(e){"ENOENT"!==e.code&&console.log(`Unexpected error attempting to determine if executable file exists '${t}': ${e}`)}if(n&&n.isFile()){if(e.IS_WINDOWS){try{const r=a.dirname(t),n=a.basename(t).toUpperCase();for(const i of yield e.readdir(r))if(n===i.toUpperCase()){t=a.join(r,i);break}}catch(e){console.log(`Unexpected error attempting to determine the actual case of the file '${t}': ${e}`)}return t}if(c(n))return t}}return""}))}},function(t,e,r){const n=r(0),{Transform:i}=r(10),o=r(3),s=r(12),{exec:a}=r(23),c=t=>{if(t instanceof Function)try{return[null,t()]}catch(t){return[t,null]}else if(t instanceof Promise)return t.then(t=>[null,t]).catch(t=>[t,null]);return["try$ was not invoked with an eligible argument",null]},u=t=>new i({transform(e,r,n){n(null,e.toString().trim().split("\n").map(e=>`[${t}] ${e}`).join("\n")+"\n")}});(async()=>{const t=o.getInput("registry",{required:!0}),e=o.getInput("root-directory",{required:!0}),r=o.getInput("changed-files",{required:!0}),i="true"===o.getInput("deploy"),l=o.getInput("image-tags"),[h]=await c(a("gcloud",["version"]));if(h)return o.setFailed('The "gcloud" executable is not available');const[f]=await c(a("docker",["version"]));if(f)return o.setFailed('The "docker" executable is not available');const[d,p]=c(()=>JSON.parse(r));if(d)return o.setFailed("Input changed-files is not valid JSON: "+d);const m=new Set(p.map(t=>n.relative(e,t)).filter(t=>!t.startsWith("../"))),[g,y]=c(()=>JSON.parse(l));if(g)return o.setFailed("Input image-tags is not valid JSON: "+d);const[b,v]=await c(s.create(n.resolve(e,"**","Dockerfile*")));if(b)return o.setFailed("Can't create glob for Dockerfiles: "+b);const[w,S]=await c(v.glob());if(w)return o.setFailed("Can't execute glob for Dockerfiles: "+w);console.log(S);const _=S.filter(t=>{const r=n.dirname(n.relative(e,t));return((t,e)=>{for(const r of t)if(e(r))return!0;return!1})(m,t=>t.startsWith(r))}).map(((t,e,r)=>async i=>{console.log("dockerfile:"),console.log(i);const o=n.basename(i);console.log("filename:"),console.log(o);const s=o.match(/^Dockerfile(?:\.(.+))?$/);console.log("regexmatch:"),console.log(s);const l=s?s[1]:"",h=process.env.GITHUB_SHA,f=n.dirname(i),d=n.basename(f),p=n.join(t,d,l),m=`${d}/${o}`,g=u(m);g.pipe(process.stdout);const y=u(m);y.pipe(process.stderr),r.push(h);const[b]=await c(a("docker",["build","-f",o,...r.map(t=>["-t",`${p}:${t}`]).flat(),"."],{cwd:f,outStream:g,errStream:y}));if(b)throw new Error(`Could not build image '${h}' from dockerfile '${i}' with additional tags '${r}'.`);if(!e)return;const[v]=await c(a("docker",["image","push","-a",p],{cwd:f,outStream:g,errStream:y}));if(v)throw new Error(`Could not deploy one or more of '${r}'`)})(t,i,y));(await Promise.allSettled(_).then(t=>t.filter(t=>"rejected"===t.status))).forEach(t=>o.setFailed(t.reason))})()},function(t,e){t.exports=require("stream")},function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const i=n(r(1));function o(t,e,r){const n=new s(t,e,r);process.stdout.write(n.toString()+i.EOL)}e.issueCommand=o,e.issue=function(t,e=""){o(t,{},e)};class s{constructor(t,e,r){t||(t="missing.command"),this.command=t,this.properties=e,this.message=r}toString(){let t="::"+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(const n in this.properties)if(this.properties.hasOwnProperty(n)){const i=this.properties[n];i&&(r?r=!1:t+=",",t+=`${n}=${e=i,a(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}`)}}var e;return t+="::"+function(t){return a(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}(this.message),t}}function a(t){return null==t?"":"string"==typeof t||t instanceof String?t:JSON.stringify(t)}e.toCommandValue=a},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=r(13);e.create=function(t,e){return n(this,void 0,void 0,(function*(){return yield i.DefaultGlobber.create(t,e)}))}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},i=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}},o=this&&this.__await||function(t){return this instanceof o?(this.v=t,this):new o(t)},s=this&&this.__asyncGenerator||function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){s.push([t,e,r,n])>1||c(t,e)}))})}function c(t,e){try{(r=i[t](e)).value instanceof o?Promise.resolve(r.value.v).then(u,l):h(s[0][2],r)}catch(t){h(s[0][3],t)}var r}function u(t){c("next",t)}function l(t){c("throw",t)}function h(t,e){t(e),s.shift(),s.length&&c(s[0][0],s[0][1])}};Object.defineProperty(e,"__esModule",{value:!0});const a=r(3),c=r(6),u=r(14),l=r(0),h=r(15),f=r(5),d=r(16),p=r(22),m="win32"===process.platform;class g{constructor(t){this.patterns=[],this.searchPaths=[],this.options=u.getOptions(t)}getSearchPaths(){return this.searchPaths.slice()}glob(){var t,e;return n(this,void 0,void 0,(function*(){const r=[];try{for(var n,o=i(this.globGenerator());!(n=yield o.next()).done;){const t=n.value;r.push(t)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=o.return)&&(yield e.call(o))}finally{if(t)throw t.error}}return r}))}globGenerator(){return s(this,arguments,(function*(){const t=u.getOptions(this.options),e=[];for(const r of this.patterns)e.push(r),t.implicitDescendants&&(r.trailingSeparator||"**"!==r.segments[r.segments.length-1])&&e.push(new d.Pattern(r.negate,r.segments.concat("**")));const r=[];for(const t of h.getSearchPaths(e)){a.debug(`Search path '${t}'`);try{yield o(c.promises.lstat(t))}catch(t){if("ENOENT"===t.code)continue;throw t}r.unshift(new p.SearchState(t,1))}const n=[];for(;r.length;){const i=r.pop(),s=h.match(e,i.path),a=!!s||h.partialMatch(e,i.path);if(!s&&!a)continue;const u=yield o(g.stat(i,t,n));if(u)if(u.isDirectory()){if(s&f.MatchKind.Directory)yield yield o(i.path);else if(!a)continue;const t=i.level+1,e=(yield o(c.promises.readdir(i.path))).map(e=>new p.SearchState(l.join(i.path,e),t));r.push(...e.reverse())}else s&f.MatchKind.File&&(yield yield o(i.path))}}))}static create(t,e){return n(this,void 0,void 0,(function*(){const r=new g(e);m&&(t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n"));const n=t.split("\n").map(t=>t.trim());for(const t of n)t&&!t.startsWith("#")&&r.patterns.push(new d.Pattern(t));return r.searchPaths.push(...h.getSearchPaths(r.patterns)),r}))}static stat(t,e,r){return n(this,void 0,void 0,(function*(){let n;if(e.followSymbolicLinks)try{n=yield c.promises.stat(t.path)}catch(r){if("ENOENT"===r.code){if(e.omitBrokenSymbolicLinks)return void a.debug(`Broken symlink '${t.path}'`);throw new Error(`No information found for the path '${t.path}'. This may indicate a broken symbolic link.`)}throw r}else n=yield c.promises.lstat(t.path);if(n.isDirectory()&&e.followSymbolicLinks){const e=yield c.promises.realpath(t.path);for(;r.length>=t.level;)r.pop();if(r.some(t=>t===e))return void a.debug(`Symlink cycle detected for path '${t.path}' and realpath '${e}'`);r.push(e)}return n}))}}e.DefaultGlobber=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(3);e.getOptions=function(t){const e={followSymbolicLinks:!0,implicitDescendants:!0,omitBrokenSymbolicLinks:!0};return t&&("boolean"==typeof t.followSymbolicLinks&&(e.followSymbolicLinks=t.followSymbolicLinks,n.debug(`followSymbolicLinks '${e.followSymbolicLinks}'`)),"boolean"==typeof t.implicitDescendants&&(e.implicitDescendants=t.implicitDescendants,n.debug(`implicitDescendants '${e.implicitDescendants}'`)),"boolean"==typeof t.omitBrokenSymbolicLinks&&(e.omitBrokenSymbolicLinks=t.omitBrokenSymbolicLinks,n.debug(`omitBrokenSymbolicLinks '${e.omitBrokenSymbolicLinks}'`))),e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(4),i=r(5),o="win32"===process.platform;e.getSearchPaths=function(t){t=t.filter(t=>!t.negate);const e={};for(const r of t){e[o?r.searchPath.toUpperCase():r.searchPath]="candidate"}const r=[];for(const i of t){const t=o?i.searchPath.toUpperCase():i.searchPath;if("included"===e[t])continue;let s=!1,a=t,c=n.dirname(a);for(;c!==a;){if(e[c]){s=!0;break}a=c,c=n.dirname(a)}s||(r.push(i.searchPath),e[t]="included")}return r},e.match=function(t,e){let r=i.MatchKind.None;for(const n of t)n.negate?r&=~n.match(e):r|=n.match(e);return r},e.partialMatch=function(t,e){return t.some(t=>!t.negate&&t.partialMatch(e))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(2),i=r(1),o=r(0),s=r(4),a=r(17),c=r(5),u=r(21),l="win32"===process.platform;class h{constructor(t,e){let r;if(this.negate=!1,"string"==typeof t)r=t.trim();else{n((e=e||[]).length,"Parameter 'segments' must not empty");const i=h.getLiteral(e[0]);n(i&&s.hasAbsoluteRoot(i),"Parameter 'segments' first element must be a root path"),r=new u.Path(e).toString().trim(),t&&(r="!"+r)}for(;r.startsWith("!");)this.negate=!this.negate,r=r.substr(1).trim();r=h.fixupPattern(r),this.segments=new u.Path(r).segments,this.trailingSeparator=s.normalizeSeparators(r).endsWith(o.sep),r=s.safeTrimTrailingSeparator(r);let i=!1;const c=this.segments.map(t=>h.getLiteral(t)).filter(t=>!i&&!(i=""===t));this.searchPath=new u.Path(c).toString(),this.rootRegExp=new RegExp(h.regExpEscape(c[0]),l?"i":"");const f={dot:!0,nobrace:!0,nocase:l,nocomment:!0,noext:!0,nonegate:!0};r=l?r.replace(/\\/g,"/"):r,this.minimatch=new a.Minimatch(r,f)}match(t){return"**"===this.segments[this.segments.length-1]?(t=s.normalizeSeparators(t)).endsWith(o.sep)||(t=`${t}${o.sep}`):t=s.safeTrimTrailingSeparator(t),this.minimatch.match(t)?this.trailingSeparator?c.MatchKind.Directory:c.MatchKind.All:c.MatchKind.None}partialMatch(t){return t=s.safeTrimTrailingSeparator(t),s.dirname(t)===t?this.rootRegExp.test(t):this.minimatch.matchOne(t.split(l?/\\+/:/\/+/),this.minimatch.set[0],!0)}static globEscape(t){return(l?t:t.replace(/\\/g,"\\\\")).replace(/(\[)(?=[^/]+\])/g,"[[]").replace(/\?/g,"[?]").replace(/\*/g,"[*]")}static fixupPattern(t){n(t,"pattern cannot be empty");const e=new u.Path(t).segments.map(t=>h.getLiteral(t));if(n(e.every((t,e)=>("."!==t||0===e)&&".."!==t),`Invalid pattern '${t}'. Relative pathing '.' and '..' is not allowed.`),n(!s.hasRoot(t)||e[0],`Invalid pattern '${t}'. Root segment must not contain globs.`),"."===(t=s.normalizeSeparators(t))||t.startsWith("."+o.sep))t=h.globEscape(process.cwd())+t.substr(1);else if("~"===t||t.startsWith("~"+o.sep)){const e=i.homedir();n(e,"Unable to determine HOME directory"),n(s.hasAbsoluteRoot(e),`Expected HOME directory to be a rooted path. Actual '${e}'`),t=h.globEscape(e)+t.substr(1)}else if(l&&(t.match(/^[A-Z]:$/i)||t.match(/^[A-Z]:[^\\]/i))){let e=s.ensureAbsoluteRoot("C:\\dummy-root",t.substr(0,2));t.length>2&&!e.endsWith("\\")&&(e+="\\"),t=h.globEscape(e)+t.substr(2)}else if(l&&("\\"===t||t.match(/^\\[^\\]/))){let e=s.ensureAbsoluteRoot("C:\\dummy-root","\\");e.endsWith("\\")||(e+="\\"),t=h.globEscape(e)+t.substr(1)}else t=s.ensureAbsoluteRoot(h.globEscape(process.cwd()),t);return s.normalizeSeparators(t)}static getLiteral(t){let e="";for(let r=0;r<t.length;r++){const n=t[r];if("\\"===n&&!l&&r+1<t.length)e+=t[++r];else{if("*"===n||"?"===n)return"";if("["===n&&r+1<t.length){let n="",i=-1;for(let e=r+1;e<t.length;e++){const r=t[e];if("\\"===r&&!l&&e+1<t.length)n+=t[++e];else{if("]"===r){i=e;break}n+=r}}if(i>=0){if(n.length>1)return"";if(n){e+=n,r=i;continue}}}e+=n}}return e}static regExpEscape(t){return t.replace(/[[\\^$.|?*+()]/g,"\\$&")}}e.Pattern=h},function(t,e,r){t.exports=l,l.Minimatch=h;var n={sep:"/"};try{n=r(0)}catch(t){}var i=l.GLOBSTAR=h.GLOBSTAR={},o=r(18),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="().*{}+?[]^$\\!".split("").reduce((function(t,e){return t[e]=!0,t}),{});var c=/\/+/;function u(t,e){t=t||{},e=e||{};var r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),Object.keys(t).forEach((function(e){r[e]=t[e]})),r}function l(t,e,r){if("string"!=typeof e)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===e.charAt(0))&&(""===e.trim()?""===t:new h(e,r).match(t))}function h(t,e){if(!(this instanceof h))return new h(t,e);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"/"!==n.sep&&(t=t.split(n.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function f(t,e){if(e||(e=this instanceof h?this.options:{}),void 0===(t=void 0===t?this.pattern:t))throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:o(t)}l.filter=function(t,e){return e=e||{},function(r,n,i){return l(r,t,e)}},l.defaults=function(t){if(!t||!Object.keys(t).length)return l;var e=l,r=function(r,n,i){return e.minimatch(r,n,u(t,i))};return r.Minimatch=function(r,n){return new e.Minimatch(r,u(t,n))},r},h.defaults=function(t){return t&&Object.keys(t).length?l.defaults(t).Minimatch:h},h.prototype.debug=function(){},h.prototype.make=function(){if(this._made)return;var t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error);this.debug(this.pattern,r),r=this.globParts=r.map((function(t){return t.split(c)})),this.debug(this.pattern,r),r=r.map((function(t,e,r){return t.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(t){return-1===t.indexOf(!1)})),this.debug(this.pattern,r),this.set=r},h.prototype.parseNegate=function(){var t=this.pattern,e=!1,r=this.options,n=0;if(r.nonegate)return;for(var i=0,o=t.length;i<o&&"!"===t.charAt(i);i++)e=!e,n++;n&&(this.pattern=t.substr(n));this.negate=e},l.braceExpand=function(t,e){return f(t,e)},h.prototype.braceExpand=f,h.prototype.parse=function(t,e){if(t.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===t)return i;if(""===t)return"";var n,o="",c=!!r.nocase,u=!1,l=[],h=[],f=!1,p=-1,m=-1,g="."===t.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=this;function b(){if(n){switch(n){case"*":o+="[^/]*?",c=!0;break;case"?":o+="[^/]",c=!0;break;default:o+="\\"+n}y.debug("clearStateChar %j %j",n,o),n=!1}}for(var v,w=0,S=t.length;w<S&&(v=t.charAt(w));w++)if(this.debug("%s\t%s %s %j",t,w,o,v),u&&a[v])o+="\\"+v,u=!1;else switch(v){case"/":return!1;case"\\":b(),u=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,w,o,v),f){this.debug("  in class"),"!"===v&&w===m+1&&(v="^"),o+=v;continue}y.debug("call clearStateChar %j",n),b(),n=v,r.noext&&b();continue;case"(":if(f){o+="(";continue}if(!n){o+="\\(";continue}l.push({type:n,start:w-1,reStart:o.length,open:s[n].open,close:s[n].close}),o+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,o),n=!1;continue;case")":if(f||!l.length){o+="\\)";continue}b(),c=!0;var _=l.pop();o+=_.close,"!"===_.type&&h.push(_),_.reEnd=o.length;continue;case"|":if(f||!l.length||u){o+="\\|",u=!1;continue}b(),o+="|";continue;case"[":if(b(),f){o+="\\"+v;continue}f=!0,m=w,p=o.length,o+=v;continue;case"]":if(w===m+1||!f){o+="\\"+v,u=!1;continue}if(f){var x=t.substring(m+1,w);try{RegExp("["+x+"]")}catch(t){var E=this.parse(x,d);o=o.substr(0,p)+"\\["+E[0]+"\\]",c=c||E[1],f=!1;continue}}c=!0,f=!1,o+=v;continue;default:b(),u?u=!1:!a[v]||"^"===v&&f||(o+="\\"),o+=v}f&&(x=t.substr(m+1),E=this.parse(x,d),o=o.substr(0,p)+"\\["+E[0],c=c||E[1]);for(_=l.pop();_;_=l.pop()){var P=o.slice(_.reStart+_.open.length);this.debug("setting tail",o,_),P=P.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(t,e,r){return r||(r="\\"),e+e+r+"|"})),this.debug("tail=%j\n   %s",P,P,_,o);var O="*"===_.type?"[^/]*?":"?"===_.type?"[^/]":"\\"+_.type;c=!0,o=o.slice(0,_.reStart)+O+"\\("+P}b(),u&&(o+="\\\\");var $=!1;switch(o.charAt(0)){case".":case"[":case"(":$=!0}for(var A=h.length-1;A>-1;A--){var k=h[A],C=o.slice(0,k.reStart),T=o.slice(k.reStart,k.reEnd-8),j=o.slice(k.reEnd-8,k.reEnd),M=o.slice(k.reEnd);j+=M;var R=C.split("(").length-1,D=M;for(w=0;w<R;w++)D=D.replace(/\)[+*?]?/,"");var N="";""===(M=D)&&e!==d&&(N="$"),o=C+T+M+N+j}""!==o&&c&&(o="(?=.)"+o);$&&(o=g+o);if(e===d)return[o,c];if(!c)return function(t){return t.replace(/\\(.)/g,"$1")}(t);var I=r.nocase?"i":"";try{var W=new RegExp("^"+o+"$",I)}catch(t){return new RegExp("$.")}return W._glob=t,W._src=o,W};var d={};l.makeRe=function(t,e){return new h(t,e||{}).makeRe()},h.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?"[^/]*?":e.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=e.nocase?"i":"",o=t.map((function(t){return t.map((function(t){return t===i?r:"string"==typeof t?function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(t):t._src})).join("\\/")})).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,n)}catch(t){this.regexp=!1}return this.regexp},l.match=function(t,e,r){var n=new h(e,r=r||{});return t=t.filter((function(t){return n.match(t)})),n.options.nonull&&!t.length&&t.push(e),t},h.prototype.match=function(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var r=this.options;"/"!==n.sep&&(t=t.split(n.sep).join("/"));t=t.split(c),this.debug(this.pattern,"split",t);var i,o,s=this.set;for(this.debug(this.pattern,"set",s),o=t.length-1;o>=0&&!(i=t[o]);o--);for(o=0;o<s.length;o++){var a=s[o],u=t;if(r.matchBase&&1===a.length&&(u=[i]),this.matchOne(u,a,e))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},h.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var o=0,s=0,a=t.length,c=e.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var u,l=e[s],h=t[o];if(this.debug(e,l,h),!1===l)return!1;if(l===i){this.debug("GLOBSTAR",[e,l,h]);var f=o,d=s+1;if(d===c){for(this.debug("** at the end");o<a;o++)if("."===t[o]||".."===t[o]||!n.dot&&"."===t[o].charAt(0))return!1;return!0}for(;f<a;){var p=t[f];if(this.debug("\nglobstar while",t,f,e,d,p),this.matchOne(t.slice(f),e.slice(d),r))return this.debug("globstar found match!",f,a,p),!0;if("."===p||".."===p||!n.dot&&"."===p.charAt(0)){this.debug("dot detected!",t,f,e,d);break}this.debug("globstar swallow a segment, and continue"),f++}return!(!r||(this.debug("\n>>> no match, partial?",t,f,e,d),f!==a))}if("string"==typeof l?(u=n.nocase?h.toLowerCase()===l.toLowerCase():h===l,this.debug("string match",l,h,u)):(u=h.match(l),this.debug("pattern match",l,h,u)),!u)return!1}if(o===a&&s===c)return!0;if(o===a)return r;if(s===c)return o===a-1&&""===t[o];throw new Error("wtf?")}},function(t,e,r){var n=r(19),i=r(20);t.exports=function(t){if(!t)return[];"{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2));return function t(e,r){var o=[],s=i("{","}",e);if(!s||/\$$/.test(s.pre))return[e];var c,u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),g=u||h,y=s.body.indexOf(",")>=0;if(!g&&!y)return s.post.match(/,.*\}/)?(e=s.pre+"{"+s.body+a+s.post,t(e)):[e];if(g)c=s.body.split(/\.\./);else{if(1===(c=function t(e){if(!e)return[""];var r=[],n=i("{","}",e);if(!n)return e.split(",");var o=n.pre,s=n.body,a=n.post,c=o.split(",");c[c.length-1]+="{"+s+"}";var u=t(a);a.length&&(c[c.length-1]+=u.shift(),c.push.apply(c,u));return r.push.apply(r,c),r}(s.body)).length)if(1===(c=t(c[0],!1).map(f)).length)return(w=s.post.length?t(s.post,!1):[""]).map((function(t){return s.pre+c[0]+t}))}var b,v=s.pre,w=s.post.length?t(s.post,!1):[""];if(g){var S=l(c[0]),_=l(c[1]),x=Math.max(c[0].length,c[1].length),E=3==c.length?Math.abs(l(c[2])):1,P=p;_<S&&(E*=-1,P=m);var O=c.some(d);b=[];for(var $=S;P($,_);$+=E){var A;if(h)"\\"===(A=String.fromCharCode($))&&(A="");else if(A=String($),O){var k=x-A.length;if(k>0){var C=new Array(k+1).join("0");A=$<0?"-"+C+A.slice(1):C+A}}b.push(A)}}else b=n(c,(function(e){return t(e,!1)}));for(var T=0;T<b.length;T++)for(var j=0;j<w.length;j++){var M=v+b[T]+w[j];(!r||g||M)&&o.push(M)}return o}(function(t){return t.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(u)}(t),!0).map(h)};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function l(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function h(t){return t.split(o).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(u).join(".")}function f(t){return"{"+t+"}"}function d(t){return/^-?0\d/.test(t)}function p(t,e){return t<=e}function m(t,e){return t>=e}},function(t,e){t.exports=function(t,e){for(var n=[],i=0;i<t.length;i++){var o=e(t[i],i);r(o)?n.push.apply(n,o):n.push(o)}return n};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";function n(t,e,r){t instanceof RegExp&&(t=i(t,r)),e instanceof RegExp&&(e=i(e,r));var n=o(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function i(t,e){var r=e.match(t);return r?r[0]:null}function o(t,e,r){var n,i,o,s,a,c=r.indexOf(t),u=r.indexOf(e,c+1),l=c;if(c>=0&&u>0){for(n=[],o=r.length;l>=0&&!a;)l==c?(n.push(l),c=r.indexOf(t,l+1)):1==n.length?a=[n.pop(),u]:((i=n.pop())<o&&(o=i,s=u),u=r.indexOf(e,l+1)),l=c<u&&c>=0?c:u;n.length&&(a=[o,s])}return a}t.exports=n,n.range=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(2),i=r(0),o=r(4),s="win32"===process.platform;e.Path=class{constructor(t){if(this.segments=[],"string"==typeof t)if(n(t,"Parameter 'itemPath' must not be empty"),t=o.safeTrimTrailingSeparator(t),o.hasRoot(t)){let e=t,r=o.dirname(e);for(;r!==e;){const t=i.basename(e);this.segments.unshift(t),e=r,r=o.dirname(e)}this.segments.unshift(e)}else this.segments=t.split(i.sep);else{n(t.length>0,"Parameter 'itemPath' must not be an empty array");for(let e=0;e<t.length;e++){let r=t[e];n(r,"Parameter 'itemPath' must not contain any empty segments"),r=o.normalizeSeparators(t[e]),0===e&&o.hasRoot(r)?(r=o.safeTrimTrailingSeparator(r),n(r===o.dirname(r),"Parameter 'itemPath' root segment contains information for multiple segments"),this.segments.push(r)):(n(!r.includes(i.sep),"Parameter 'itemPath' contains unexpected path separators"),this.segments.push(r))}}}toString(){let t=this.segments[0],e=t.endsWith(i.sep)||s&&/^[A-Z]:$/i.test(t);for(let r=1;r<this.segments.length;r++)e?e=!1:t+=i.sep,t+=this.segments[r];return t}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SearchState=class{constructor(t,e){this.path=t,this.level=e}}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const o=i(r(24));e.exec=function(t,e,r){return n(this,void 0,void 0,(function*(){const n=o.argStringToArray(t);if(0===n.length)throw new Error("Parameter 'commandLine' cannot be null or empty.");const i=n[0];e=n.slice(1).concat(e||[]);return new o.ToolRunner(i,e,r).exec()}))}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))},i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const o=i(r(1)),s=i(r(25)),a=i(r(7)),c=i(r(0)),u=i(r(26)),l=i(r(8)),h="win32"===process.platform;class f extends s.EventEmitter{constructor(t,e,r){if(super(),!t)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=t,this.args=e||[],this.options=r||{}}_debug(t){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(t)}_getCommandString(t,e){const r=this._getSpawnFileName(),n=this._getSpawnArgs(t);let i=e?"":"[command]";if(h)if(this._isCmdFile()){i+=r;for(const t of n)i+=" "+t}else if(t.windowsVerbatimArguments){i+=`"${r}"`;for(const t of n)i+=" "+t}else{i+=this._windowsQuoteCmdArg(r);for(const t of n)i+=" "+this._windowsQuoteCmdArg(t)}else{i+=r;for(const t of n)i+=" "+t}return i}_processLineBuffer(t,e,r){try{let n=e+t.toString(),i=n.indexOf(o.EOL);for(;i>-1;){r(n.substring(0,i)),n=n.substring(i+o.EOL.length),i=n.indexOf(o.EOL)}e=n}catch(t){this._debug("error processing line. Failed with error "+t)}}_getSpawnFileName(){return h&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(t){if(h&&this._isCmdFile()){let e='/D /S /C "'+this._windowsQuoteCmdArg(this.toolPath);for(const r of this.args)e+=" ",e+=t.windowsVerbatimArguments?r:this._windowsQuoteCmdArg(r);return e+='"',[e]}return this.args}_endsWith(t,e){return t.endsWith(e)}_isCmdFile(){const t=this.toolPath.toUpperCase();return this._endsWith(t,".CMD")||this._endsWith(t,".BAT")}_windowsQuoteCmdArg(t){if(!this._isCmdFile())return this._uvQuoteCmdArg(t);if(!t)return'""';const e=[" ","\t","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'];let r=!1;for(const n of t)if(e.some(t=>t===n)){r=!0;break}if(!r)return t;let n='"',i=!0;for(let e=t.length;e>0;e--)n+=t[e-1],i&&"\\"===t[e-1]?n+="\\":'"'===t[e-1]?(i=!0,n+='"'):i=!1;return n+='"',n.split("").reverse().join("")}_uvQuoteCmdArg(t){if(!t)return'""';if(!t.includes(" ")&&!t.includes("\t")&&!t.includes('"'))return t;if(!t.includes('"')&&!t.includes("\\"))return`"${t}"`;let e='"',r=!0;for(let n=t.length;n>0;n--)e+=t[n-1],r&&"\\"===t[n-1]?e+="\\":'"'===t[n-1]?(r=!0,e+="\\"):r=!1;return e+='"',e.split("").reverse().join("")}_cloneExecOptions(t){const e={cwd:(t=t||{}).cwd||process.cwd(),env:t.env||process.env,silent:t.silent||!1,windowsVerbatimArguments:t.windowsVerbatimArguments||!1,failOnStdErr:t.failOnStdErr||!1,ignoreReturnCode:t.ignoreReturnCode||!1,delay:t.delay||1e4};return e.outStream=t.outStream||process.stdout,e.errStream=t.errStream||process.stderr,e}_getSpawnOptions(t,e){t=t||{};const r={};return r.cwd=t.cwd,r.env=t.env,r.windowsVerbatimArguments=t.windowsVerbatimArguments||this._isCmdFile(),t.windowsVerbatimArguments&&(r.argv0=`"${e}"`),r}exec(){return n(this,void 0,void 0,(function*(){return!l.isRooted(this.toolPath)&&(this.toolPath.includes("/")||h&&this.toolPath.includes("\\"))&&(this.toolPath=c.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield u.which(this.toolPath,!0),new Promise((t,e)=>{this._debug("exec tool: "+this.toolPath),this._debug("arguments:");for(const t of this.args)this._debug("   "+t);const r=this._cloneExecOptions(this.options);!r.silent&&r.outStream&&r.outStream.write(this._getCommandString(r)+o.EOL);const n=new d(r,this.toolPath);n.on("debug",t=>{this._debug(t)});const i=this._getSpawnFileName(),s=a.spawn(i,this._getSpawnArgs(r),this._getSpawnOptions(this.options,i));s.stdout&&s.stdout.on("data",t=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(t),!r.silent&&r.outStream&&r.outStream.write(t),this._processLineBuffer(t,"",t=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline(t)})});if(s.stderr&&s.stderr.on("data",t=>{if(n.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(t),!r.silent&&r.errStream&&r.outStream){(r.failOnStdErr?r.errStream:r.outStream).write(t)}this._processLineBuffer(t,"",t=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline(t)})}),s.on("error",t=>{n.processError=t.message,n.processExited=!0,n.processClosed=!0,n.CheckComplete()}),s.on("exit",t=>{n.processExitCode=t,n.processExited=!0,this._debug(`Exit code ${t} received from tool '${this.toolPath}'`),n.CheckComplete()}),s.on("close",t=>{n.processExitCode=t,n.processExited=!0,n.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),n.CheckComplete()}),n.on("done",(r,n)=>{"".length>0&&this.emit("stdline",""),"".length>0&&this.emit("errline",""),s.removeAllListeners(),r?e(r):t(n)}),this.options.input){if(!s.stdin)throw new Error("child process missing stdin");s.stdin.end(this.options.input)}})}))}}e.ToolRunner=f,e.argStringToArray=function(t){const e=[];let r=!1,n=!1,i="";function o(t){n&&'"'!==t&&(i+="\\"),i+=t,n=!1}for(let s=0;s<t.length;s++){const a=t.charAt(s);'"'!==a?"\\"===a&&n?o(a):"\\"===a&&r?n=!0:" "!==a||r?o(a):i.length>0&&(e.push(i),i=""):n?o(a):r=!r}return i.length>0&&e.push(i.trim()),e};class d extends s.EventEmitter{constructor(t,e){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!e)throw new Error("toolPath must not be empty");this.options=t,this.toolPath=e,t.delay&&(this.delay=t.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=setTimeout(d.HandleTimeout,this.delay,this)))}_debug(t){this.emit("debug",t)}_setResult(){let t;this.processExited&&(this.processError?t=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):0===this.processExitCode||this.options.ignoreReturnCode?this.processStderr&&this.options.failOnStdErr&&(t=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`)):t=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`)),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",t,this.processExitCode)}static HandleTimeout(t){if(!t.done){if(!t.processClosed&&t.processExited){const e=`The STDIO streams did not close within ${t.delay/1e3} seconds of the exit event from process '${t.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;t._debug(e)}t._setResult()}}}},function(t,e){t.exports=require("events")},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=r(7),o=r(0),s=r(27),a=r(8),c=s.promisify(i.exec);function u(t){return n(this,void 0,void 0,(function*(){if(a.IS_WINDOWS){try{(yield a.isDirectory(t,!0))?yield c(`rd /s /q "${t}"`):yield c(`del /f /a "${t}"`)}catch(t){if("ENOENT"!==t.code)throw t}try{yield a.unlink(t)}catch(t){if("ENOENT"!==t.code)throw t}}else{let e=!1;try{e=yield a.isDirectory(t)}catch(t){if("ENOENT"!==t.code)throw t;return}e?yield c(`rm -rf "${t}"`):yield a.unlink(t)}}))}function l(t){return n(this,void 0,void 0,(function*(){yield a.mkdirP(t)}))}function h(t,e,r){return n(this,void 0,void 0,(function*(){if((yield a.lstat(t)).isSymbolicLink()){try{yield a.lstat(e),yield a.unlink(e)}catch(t){"EPERM"===t.code&&(yield a.chmod(e,"0666"),yield a.unlink(e))}const r=yield a.readlink(t);yield a.symlink(r,e,a.IS_WINDOWS?"junction":null)}else(yield a.exists(e))&&!r||(yield a.copyFile(t,e))}))}e.cp=function(t,e,r={}){return n(this,void 0,void 0,(function*(){const{force:i,recursive:s}=function(t){const e=null==t.force||t.force,r=Boolean(t.recursive);return{force:e,recursive:r}}(r),c=(yield a.exists(e))?yield a.stat(e):null;if(c&&c.isFile()&&!i)return;const u=c&&c.isDirectory()?o.join(e,o.basename(t)):e;if(!(yield a.exists(t)))throw new Error("no such file or directory: "+t);if((yield a.stat(t)).isDirectory()){if(!s)throw new Error(`Failed to copy. ${t} is a directory, but tried to copy without recursive flag.`);yield function t(e,r,i,o){return n(this,void 0,void 0,(function*(){if(i>=255)return;i++,yield l(r);const n=yield a.readdir(e);for(const s of n){const n=`${e}/${s}`,c=`${r}/${s}`;(yield a.lstat(n)).isDirectory()?yield t(n,c,i,o):yield h(n,c,o)}yield a.chmod(r,(yield a.stat(e)).mode)}))}(t,u,0,i)}else{if(""===o.relative(t,u))throw new Error(`'${u}' and '${t}' are the same file`);yield h(t,u,i)}}))},e.mv=function(t,e,r={}){return n(this,void 0,void 0,(function*(){if(yield a.exists(e)){let n=!0;if((yield a.isDirectory(e))&&(e=o.join(e,o.basename(t)),n=yield a.exists(e)),n){if(null!=r.force&&!r.force)throw new Error("Destination already exists");yield u(e)}}yield l(o.dirname(e)),yield a.rename(t,e)}))},e.rmRF=u,e.mkdirP=l,e.which=function t(e,r){return n(this,void 0,void 0,(function*(){if(!e)throw new Error("parameter 'tool' is required");if(r){if(!(yield t(e,!1)))throw a.IS_WINDOWS?new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${e}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`)}try{const t=[];if(a.IS_WINDOWS&&process.env.PATHEXT)for(const e of process.env.PATHEXT.split(o.delimiter))e&&t.push(e);if(a.isRooted(e)){const r=yield a.tryGetExecutablePath(e,t);return r||""}if(e.includes("/")||a.IS_WINDOWS&&e.includes("\\"))return"";const r=[];if(process.env.PATH)for(const t of process.env.PATH.split(o.delimiter))t&&r.push(t);for(const n of r){const r=yield a.tryGetExecutablePath(n+o.sep+e,t);if(r)return r}return""}catch(t){throw new Error("which failed with message "+t.message)}}))}},function(t,e){t.exports=require("util")}]);